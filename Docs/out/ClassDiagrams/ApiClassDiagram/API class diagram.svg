<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="952px" preserveAspectRatio="none" style="width:3565px;height:952px;background:#FFFFFF;" version="1.1" viewBox="0 0 3565 952" width="3565px" zoomAndPan="magnify"><defs/><g><!--MD5=[29f97d496cbdc4ec81664c6d94dc9bf6]
class UserController--><g id="elem_UserController"><rect codeLine="7" fill="#F1F1F1" height="188.875" id="UserController" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="736" x="575.5" y="7"/><ellipse cx="893.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M896.5156,18.875 Q896.6719,18.6563 896.8594,18.5469 Q897.0469,18.4375 897.2656,18.4375 Q897.6406,18.4375 897.875,18.6953 Q898.1094,18.9531 898.1094,19.5625 L898.1094,21.0156 Q898.1094,21.625 897.875,21.8906 Q897.6406,22.1563 897.2656,22.1563 Q896.9219,22.1563 896.7188,21.9531 Q896.5156,21.7656 896.4063,21.25 Q896.3594,20.8906 896.1719,20.7031 Q895.8438,20.3281 895.2344,20.1094 Q894.625,19.8906 894,19.8906 Q893.2344,19.8906 892.6016,20.2188 Q891.9688,20.5469 891.4766,21.2969 Q890.9844,22.0469 890.9844,23.0781 L890.9844,24.1719 Q890.9844,25.4063 891.875,26.2266 Q892.7656,27.0469 894.3594,27.0469 Q895.2969,27.0469 895.9531,26.7969 Q896.3438,26.6406 896.7656,26.2031 Q897.0313,25.9375 897.1797,25.8594 Q897.3281,25.7813 897.5313,25.7813 Q897.8594,25.7813 898.1172,26.0391 Q898.375,26.2969 898.375,26.6406 Q898.375,26.9844 898.0313,27.3906 Q897.5313,27.9688 896.7344,28.2969 Q895.6563,28.75 894.3594,28.75 Q892.8438,28.75 891.6406,28.125 Q890.6563,27.625 889.9688,26.5547 Q889.2813,25.4844 889.2813,24.2031 L889.2813,23.0469 Q889.2813,21.7188 889.8984,20.5703 Q890.5156,19.4219 891.6094,18.8047 Q892.7031,18.1875 893.9375,18.1875 Q894.6719,18.1875 895.3203,18.3516 Q895.9688,18.5156 896.5156,18.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="914.25" y="28.7285">UserController</text><line style="stroke:#181818;stroke-width:0.5;" x1="576.5" x2="1310.5" y1="39" y2="39"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="583.5" y="50.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="280" x="595.5" y="57.5332">_logger{readonly} : ILogger&lt;UserController&gt;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="583.5" y="67.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="257" x="595.5" y="75.1426">_userManager{readonly} : IUserManager</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="583.5" y="85.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="595.5" y="92.752">_tokenManager : ITokenManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="576.5" x2="1310.5" y1="99.8281" y2="99.8281"/><ellipse cx="586.5" cy="114.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="710" x="595.5" y="118.3613">UserController(logger : ILogger&lt;UserController&gt;, userManager : IUserManager, tokenManager : ITokenManager)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="595.5" y="135.9707">Â </text><ellipse cx="586.5" cy="149.3516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="431" x="595.5" y="153.5801">Create(userCreate : UserCreate) : Task&lt;ActionResult&lt;UserToken&gt;&gt;</text><ellipse cx="586.5" cy="166.9609" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="407" x="595.5" y="171.1895">Login(userLogin : UserLogin) : Task&lt;ActionResult&lt;UserToken&gt;&gt;</text><ellipse cx="586.5" cy="184.5703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="318" x="595.5" y="188.7988">GetUserFromToken() : Task&lt;ActionResult&lt;User&gt;&gt;</text></g><!--MD5=[56ab46cd423624563d94b9f2eeeea516]
class IUserManager--><g id="elem_IUserManager"><rect codeLine="25" fill="#F1F1F1" height="100.8281" id="IUserManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="389" x="889" y="256"/><ellipse cx="1033.75" cy="272" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1034.7031,268.6406 L1034.7031,275.2969 L1036.4219,275.2969 Q1037.0313,275.2969 1037.2969,275.5313 Q1037.5625,275.7656 1037.5625,276.1563 Q1037.5625,276.5313 1037.2969,276.7656 Q1037.0313,277 1036.4219,277 L1031.2813,277 Q1030.6719,277 1030.4063,276.7656 Q1030.1406,276.5313 1030.1406,276.1406 Q1030.1406,275.7656 1030.4063,275.5313 Q1030.6719,275.2969 1031.2813,275.2969 L1033,275.2969 L1033,268.6406 L1031.2813,268.6406 Q1030.6719,268.6406 1030.4063,268.4063 Q1030.1406,268.1719 1030.1406,267.7813 Q1030.1406,267.4063 1030.4063,267.1719 Q1030.6719,266.9375 1031.2813,266.9375 L1036.4219,266.9375 Q1037.0313,266.9375 1037.2969,267.1719 Q1037.5625,267.4063 1037.5625,267.7813 Q1037.5625,268.1719 1037.2969,268.4063 Q1037.0313,268.6406 1036.4219,268.6406 L1034.7031,268.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="91" x="1054.25" y="277.7285">IUserManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="890" x2="1277" y1="288" y2="288"/><line style="stroke:#181818;stroke-width:0.5;" x1="890" x2="1277" y1="296" y2="296"/><ellipse cx="900" cy="310.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="363" x="909" y="314.5332">CreateUserAsync(userCreate : UserCreate) : Task&lt;User&gt;</text><ellipse cx="900" cy="327.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="310" x="909" y="332.1426">LoginAsync(userLogin : UserLogin) : Task&lt;User&gt;</text><ellipse cx="900" cy="345.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="255" x="909" y="349.752">GetUserByIDAsync(id : int) : Task&lt;User&gt;</text></g><!--MD5=[1258d900524f45f247dd7f1e09584eb4]
class ITokenManager--><g id="elem_ITokenManager"><rect codeLine="31" fill="#F1F1F1" height="100.8281" id="ITokenManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="364" x="360.5" y="256"/><ellipse cx="487.25" cy="272" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M488.2031,268.6406 L488.2031,275.2969 L489.9219,275.2969 Q490.5313,275.2969 490.7969,275.5313 Q491.0625,275.7656 491.0625,276.1563 Q491.0625,276.5313 490.7969,276.7656 Q490.5313,277 489.9219,277 L484.7813,277 Q484.1719,277 483.9063,276.7656 Q483.6406,276.5313 483.6406,276.1406 Q483.6406,275.7656 483.9063,275.5313 Q484.1719,275.2969 484.7813,275.2969 L486.5,275.2969 L486.5,268.6406 L484.7813,268.6406 Q484.1719,268.6406 483.9063,268.4063 Q483.6406,268.1719 483.6406,267.7813 Q483.6406,267.4063 483.9063,267.1719 Q484.1719,266.9375 484.7813,266.9375 L489.9219,266.9375 Q490.5313,266.9375 490.7969,267.1719 Q491.0625,267.4063 491.0625,267.7813 Q491.0625,268.1719 490.7969,268.4063 Q490.5313,268.6406 489.9219,268.6406 L488.2031,268.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="102" x="507.75" y="277.7285">ITokenManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="361.5" x2="723.5" y1="288" y2="288"/><line style="stroke:#181818;stroke-width:0.5;" x1="361.5" x2="723.5" y1="296" y2="296"/><ellipse cx="371.5" cy="310.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="289" x="380.5" y="314.5332">GenerateUserToken(user : User) : UserToken</text><ellipse cx="371.5" cy="327.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="222" x="380.5" y="332.1426">ValidateToken(token : string) : bool</text><ellipse cx="371.5" cy="345.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="338" x="380.5" y="349.752">GetUserTokenFromToken(token : string) : UserToken</text></g><!--MD5=[d00c2197046b95564bb4dabcd5edfb06]
class IUserLocationManager--><g id="elem_IUserLocationManager"><rect codeLine="38" fill="#F1F1F1" height="100.8281" id="IUserLocationManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="540" x="1730.5" y="256"/><ellipse cx="1923.75" cy="272" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1924.7031,268.6406 L1924.7031,275.2969 L1926.4219,275.2969 Q1927.0313,275.2969 1927.2969,275.5313 Q1927.5625,275.7656 1927.5625,276.1563 Q1927.5625,276.5313 1927.2969,276.7656 Q1927.0313,277 1926.4219,277 L1921.2813,277 Q1920.6719,277 1920.4063,276.7656 Q1920.1406,276.5313 1920.1406,276.1406 Q1920.1406,275.7656 1920.4063,275.5313 Q1920.6719,275.2969 1921.2813,275.2969 L1923,275.2969 L1923,268.6406 L1921.2813,268.6406 Q1920.6719,268.6406 1920.4063,268.4063 Q1920.1406,268.1719 1920.1406,267.7813 Q1920.1406,267.4063 1920.4063,267.1719 Q1920.6719,266.9375 1921.2813,266.9375 L1926.4219,266.9375 Q1927.0313,266.9375 1927.2969,267.1719 Q1927.5625,267.4063 1927.5625,267.7813 Q1927.5625,268.1719 1927.2969,268.4063 Q1927.0313,268.6406 1926.4219,268.6406 L1924.7031,268.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="145" x="1944.25" y="277.7285">IUserLocationManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="1731.5" x2="2269.5" y1="288" y2="288"/><line style="stroke:#181818;stroke-width:0.5;" x1="1731.5" x2="2269.5" y1="296" y2="296"/><ellipse cx="1741.5" cy="310.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="260" x="1750.5" y="314.5332">IsIPLockedAsync(ip : string) : Task&lt;bool&gt;</text><ellipse cx="1741.5" cy="327.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="445" x="1750.5" y="332.1426">LogLocationAsync(userLocation : UserLocation) : Task&lt;UserLocation&gt;</text><ellipse cx="1741.5" cy="345.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="514" x="1750.5" y="349.752">UserWasLoggedInFromLocationAsync(userLocation : UserLocation) : Task&lt;bool&gt;</text></g><!--MD5=[6c06fb0cd17dfe24a13aaf4bb7e771c8]
class TokenManager--><g id="elem_TokenManager"><rect codeLine="44" fill="#F1F1F1" height="83.2188" id="TokenManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="533" x="7" y="60"/><ellipse cx="221.25" cy="76" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M224.0156,71.875 Q224.1719,71.6563 224.3594,71.5469 Q224.5469,71.4375 224.7656,71.4375 Q225.1406,71.4375 225.375,71.6953 Q225.6094,71.9531 225.6094,72.5625 L225.6094,74.0156 Q225.6094,74.625 225.375,74.8906 Q225.1406,75.1563 224.7656,75.1563 Q224.4219,75.1563 224.2188,74.9531 Q224.0156,74.7656 223.9063,74.25 Q223.8594,73.8906 223.6719,73.7031 Q223.3438,73.3281 222.7344,73.1094 Q222.125,72.8906 221.5,72.8906 Q220.7344,72.8906 220.1016,73.2188 Q219.4688,73.5469 218.9766,74.2969 Q218.4844,75.0469 218.4844,76.0781 L218.4844,77.1719 Q218.4844,78.4063 219.375,79.2266 Q220.2656,80.0469 221.8594,80.0469 Q222.7969,80.0469 223.4531,79.7969 Q223.8438,79.6406 224.2656,79.2031 Q224.5313,78.9375 224.6797,78.8594 Q224.8281,78.7813 225.0313,78.7813 Q225.3594,78.7813 225.6172,79.0391 Q225.875,79.2969 225.875,79.6406 Q225.875,79.9844 225.5313,80.3906 Q225.0313,80.9688 224.2344,81.2969 Q223.1563,81.75 221.8594,81.75 Q220.3438,81.75 219.1406,81.125 Q218.1563,80.625 217.4688,79.5547 Q216.7813,78.4844 216.7813,77.2031 L216.7813,76.0469 Q216.7813,74.7188 217.3984,73.5703 Q218.0156,72.4219 219.1094,71.8047 Q220.2031,71.1875 221.4375,71.1875 Q222.1719,71.1875 222.8203,71.3516 Q223.4688,71.5156 224.0156,71.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="241.75" y="81.7285">TokenManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="539" y1="92" y2="92"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="539" y1="100" y2="100"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="111.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="277" x="27" y="118.5332">GetPrincipal(token : string) : ClaimsPrincipal</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="128.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="507" x="27" y="136.1426">ClaimsIdentityToUserToken(identity : ClaimsPrincipal, token : string) : UserToken</text></g><!--MD5=[24add822970012a00cd97a40cd79feff]
class UserManager--><g id="elem_UserManager"><rect codeLine="49" fill="#F1F1F1" height="100.8281" id="UserManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="596" x="1346.5" y="51"/><ellipse cx="1597.75" cy="67" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1600.5156,62.875 Q1600.6719,62.6563 1600.8594,62.5469 Q1601.0469,62.4375 1601.2656,62.4375 Q1601.6406,62.4375 1601.875,62.6953 Q1602.1094,62.9531 1602.1094,63.5625 L1602.1094,65.0156 Q1602.1094,65.625 1601.875,65.8906 Q1601.6406,66.1563 1601.2656,66.1563 Q1600.9219,66.1563 1600.7188,65.9531 Q1600.5156,65.7656 1600.4063,65.25 Q1600.3594,64.8906 1600.1719,64.7031 Q1599.8438,64.3281 1599.2344,64.1094 Q1598.625,63.8906 1598,63.8906 Q1597.2344,63.8906 1596.6016,64.2188 Q1595.9688,64.5469 1595.4766,65.2969 Q1594.9844,66.0469 1594.9844,67.0781 L1594.9844,68.1719 Q1594.9844,69.4063 1595.875,70.2266 Q1596.7656,71.0469 1598.3594,71.0469 Q1599.2969,71.0469 1599.9531,70.7969 Q1600.3438,70.6406 1600.7656,70.2031 Q1601.0313,69.9375 1601.1797,69.8594 Q1601.3281,69.7813 1601.5313,69.7813 Q1601.8594,69.7813 1602.1172,70.0391 Q1602.375,70.2969 1602.375,70.6406 Q1602.375,70.9844 1602.0313,71.3906 Q1601.5313,71.9688 1600.7344,72.2969 Q1599.6563,72.75 1598.3594,72.75 Q1596.8438,72.75 1595.6406,72.125 Q1594.6563,71.625 1593.9688,70.5547 Q1593.2813,69.4844 1593.2813,68.2031 L1593.2813,67.0469 Q1593.2813,65.7188 1593.8984,64.5703 Q1594.5156,63.4219 1595.6094,62.8047 Q1596.7031,62.1875 1597.9375,62.1875 Q1598.6719,62.1875 1599.3203,62.3516 Q1599.9688,62.5156 1600.5156,62.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="1618.25" y="72.7285">UserManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="1347.5" x2="1941.5" y1="83" y2="83"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1354.5" y="94.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186" x="1366.5" y="101.5332">_userProvider : IUserProvider</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1354.5" y="111.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="300" x="1366.5" y="119.1426">_userLocationManager : IUserLocationManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="1347.5" x2="1941.5" y1="126.2188" y2="126.2188"/><ellipse cx="1357.5" cy="140.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="570" x="1366.5" y="144.752">UserManager(userProvider : IUserProvider, userLocationManager : UserLocationManager)</text></g><!--MD5=[f73269fd56b24b10ecd9be8e99f9cb1e]
class UserLocationManager--><g id="elem_UserLocationManager"><rect codeLine="55" fill="#F1F1F1" height="83.2188" id="UserLocationManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="458" x="2162.5" y="60"/><ellipse cx="2317.75" cy="76" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2320.5156,71.875 Q2320.6719,71.6563 2320.8594,71.5469 Q2321.0469,71.4375 2321.2656,71.4375 Q2321.6406,71.4375 2321.875,71.6953 Q2322.1094,71.9531 2322.1094,72.5625 L2322.1094,74.0156 Q2322.1094,74.625 2321.875,74.8906 Q2321.6406,75.1563 2321.2656,75.1563 Q2320.9219,75.1563 2320.7188,74.9531 Q2320.5156,74.7656 2320.4063,74.25 Q2320.3594,73.8906 2320.1719,73.7031 Q2319.8438,73.3281 2319.2344,73.1094 Q2318.625,72.8906 2318,72.8906 Q2317.2344,72.8906 2316.6016,73.2188 Q2315.9688,73.5469 2315.4766,74.2969 Q2314.9844,75.0469 2314.9844,76.0781 L2314.9844,77.1719 Q2314.9844,78.4063 2315.875,79.2266 Q2316.7656,80.0469 2318.3594,80.0469 Q2319.2969,80.0469 2319.9531,79.7969 Q2320.3438,79.6406 2320.7656,79.2031 Q2321.0313,78.9375 2321.1797,78.8594 Q2321.3281,78.7813 2321.5313,78.7813 Q2321.8594,78.7813 2322.1172,79.0391 Q2322.375,79.2969 2322.375,79.6406 Q2322.375,79.9844 2322.0313,80.3906 Q2321.5313,80.9688 2320.7344,81.2969 Q2319.6563,81.75 2318.3594,81.75 Q2316.8438,81.75 2315.6406,81.125 Q2314.6563,80.625 2313.9688,79.5547 Q2313.2813,78.4844 2313.2813,77.2031 L2313.2813,76.0469 Q2313.2813,74.7188 2313.8984,73.5703 Q2314.5156,72.4219 2315.6094,71.8047 Q2316.7031,71.1875 2317.9375,71.1875 Q2318.6719,71.1875 2319.3203,71.3516 Q2319.9688,71.5156 2320.5156,71.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="2338.25" y="81.7285">UserLocationManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="2163.5" x2="2619.5" y1="92" y2="92"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2170.5" y="103.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="294" x="2182.5" y="110.5332">_userLocationProvider : IUserLocationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="2163.5" x2="2619.5" y1="117.6094" y2="117.6094"/><ellipse cx="2173.5" cy="131.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="432" x="2182.5" y="136.1426">UserLocationManager(userLocationProvider : UserLocationProvider)</text></g><!--MD5=[177726c6dccf199602c5c27bb05f2a1e]
class UserCreate--><g id="elem_UserCreate"><rect codeLine="134" fill="#F1F1F1" height="65.6094" id="UserCreate" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="1173.5" y="666"/><ellipse cx="1202" cy="682" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1204.7656,677.875 Q1204.9219,677.6563 1205.1094,677.5469 Q1205.2969,677.4375 1205.5156,677.4375 Q1205.8906,677.4375 1206.125,677.6953 Q1206.3594,677.9531 1206.3594,678.5625 L1206.3594,680.0156 Q1206.3594,680.625 1206.125,680.8906 Q1205.8906,681.1563 1205.5156,681.1563 Q1205.1719,681.1563 1204.9688,680.9531 Q1204.7656,680.7656 1204.6563,680.25 Q1204.6094,679.8906 1204.4219,679.7031 Q1204.0938,679.3281 1203.4844,679.1094 Q1202.875,678.8906 1202.25,678.8906 Q1201.4844,678.8906 1200.8516,679.2188 Q1200.2188,679.5469 1199.7266,680.2969 Q1199.2344,681.0469 1199.2344,682.0781 L1199.2344,683.1719 Q1199.2344,684.4063 1200.125,685.2266 Q1201.0156,686.0469 1202.6094,686.0469 Q1203.5469,686.0469 1204.2031,685.7969 Q1204.5938,685.6406 1205.0156,685.2031 Q1205.2813,684.9375 1205.4297,684.8594 Q1205.5781,684.7813 1205.7813,684.7813 Q1206.1094,684.7813 1206.3672,685.0391 Q1206.625,685.2969 1206.625,685.6406 Q1206.625,685.9844 1206.2813,686.3906 Q1205.7813,686.9688 1204.9844,687.2969 Q1203.9063,687.75 1202.6094,687.75 Q1201.0938,687.75 1199.8906,687.125 Q1198.9063,686.625 1198.2188,685.5547 Q1197.5313,684.4844 1197.5313,683.2031 L1197.5313,682.0469 Q1197.5313,680.7188 1198.1484,679.5703 Q1198.7656,678.4219 1199.8594,677.8047 Q1200.9531,677.1875 1202.1875,677.1875 Q1202.9219,677.1875 1203.5703,677.3516 Q1204.2188,677.5156 1204.7656,677.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="1219" y="687.7285">UserCreate</text><line style="stroke:#181818;stroke-width:0.5;" x1="1174.5" x2="1306.5" y1="698" y2="698"/><ellipse cx="1184.5" cy="712.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1193.5" y="716.5332">Password : string</text><line style="stroke:#181818;stroke-width:0.5;" x1="1174.5" x2="1306.5" y1="723.6094" y2="723.6094"/></g><!--MD5=[f8bd6c2ec23e906322bbeaf68b53bb4f]
class UserLogin--><g id="elem_UserLogin"><rect codeLine="146" fill="#F1F1F1" height="83.2188" id="UserLogin" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="1016.5" y="452.5"/><ellipse cx="1048.6" cy="468.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1051.3656,464.375 Q1051.5219,464.1563 1051.7094,464.0469 Q1051.8969,463.9375 1052.1156,463.9375 Q1052.4906,463.9375 1052.725,464.1953 Q1052.9594,464.4531 1052.9594,465.0625 L1052.9594,466.5156 Q1052.9594,467.125 1052.725,467.3906 Q1052.4906,467.6563 1052.1156,467.6563 Q1051.7719,467.6563 1051.5688,467.4531 Q1051.3656,467.2656 1051.2563,466.75 Q1051.2094,466.3906 1051.0219,466.2031 Q1050.6938,465.8281 1050.0844,465.6094 Q1049.475,465.3906 1048.85,465.3906 Q1048.0844,465.3906 1047.4516,465.7188 Q1046.8188,466.0469 1046.3266,466.7969 Q1045.8344,467.5469 1045.8344,468.5781 L1045.8344,469.6719 Q1045.8344,470.9063 1046.725,471.7266 Q1047.6156,472.5469 1049.2094,472.5469 Q1050.1469,472.5469 1050.8031,472.2969 Q1051.1938,472.1406 1051.6156,471.7031 Q1051.8813,471.4375 1052.0297,471.3594 Q1052.1781,471.2813 1052.3813,471.2813 Q1052.7094,471.2813 1052.9672,471.5391 Q1053.225,471.7969 1053.225,472.1406 Q1053.225,472.4844 1052.8813,472.8906 Q1052.3813,473.4688 1051.5844,473.7969 Q1050.5063,474.25 1049.2094,474.25 Q1047.6938,474.25 1046.4906,473.625 Q1045.5063,473.125 1044.8188,472.0547 Q1044.1313,470.9844 1044.1313,469.7031 L1044.1313,468.5469 Q1044.1313,467.2188 1044.7484,466.0703 Q1045.3656,464.9219 1046.4594,464.3047 Q1047.5531,463.6875 1048.7875,463.6875 Q1049.5219,463.6875 1050.1703,463.8516 Q1050.8188,464.0156 1051.3656,464.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1066.4" y="474.2285">UserLogin</text><line style="stroke:#181818;stroke-width:0.5;" x1="1017.5" x2="1149.5" y1="484.5" y2="484.5"/><ellipse cx="1027.5" cy="498.8047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1036.5" y="503.0332">Email : string</text><ellipse cx="1027.5" cy="516.4141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1036.5" y="520.6426">Password : string</text><line style="stroke:#181818;stroke-width:0.5;" x1="1017.5" x2="1149.5" y1="527.7188" y2="527.7188"/></g><!--MD5=[6ac818b5870897fde505b1069c30005c]
class IUserProvider--><g id="elem_IUserProvider"><rect codeLine="77" fill="#F1F1F1" height="100.8281" id="IUserProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="382" x="1313.5" y="256"/><ellipse cx="1457.25" cy="272" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1458.2031,268.6406 L1458.2031,275.2969 L1459.9219,275.2969 Q1460.5313,275.2969 1460.7969,275.5313 Q1461.0625,275.7656 1461.0625,276.1563 Q1461.0625,276.5313 1460.7969,276.7656 Q1460.5313,277 1459.9219,277 L1454.7813,277 Q1454.1719,277 1453.9063,276.7656 Q1453.6406,276.5313 1453.6406,276.1406 Q1453.6406,275.7656 1453.9063,275.5313 Q1454.1719,275.2969 1454.7813,275.2969 L1456.5,275.2969 L1456.5,268.6406 L1454.7813,268.6406 Q1454.1719,268.6406 1453.9063,268.4063 Q1453.6406,268.1719 1453.6406,267.7813 Q1453.6406,267.4063 1453.9063,267.1719 Q1454.1719,266.9375 1454.7813,266.9375 L1459.9219,266.9375 Q1460.5313,266.9375 1460.7969,267.1719 Q1461.0625,267.4063 1461.0625,267.7813 Q1461.0625,268.1719 1460.7969,268.4063 Q1460.5313,268.6406 1459.9219,268.6406 L1458.2031,268.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="86" x="1477.75" y="277.7285">IUserProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="1314.5" x2="1694.5" y1="288" y2="288"/><line style="stroke:#181818;stroke-width:0.5;" x1="1314.5" x2="1694.5" y1="296" y2="296"/><ellipse cx="1324.5" cy="310.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="356" x="1333.5" y="314.5332">CreateUserAsync(userCreate : DbUser) : Task&lt;DbUser&gt;</text><ellipse cx="1324.5" cy="327.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="336" x="1333.5" y="332.1426">GetUserByEmailAsync(email : string) : Task&lt;DbUser&gt;</text><ellipse cx="1324.5" cy="345.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="1333.5" y="349.752">GetUserByIdAsync(id : int) : Task&lt;DbUser&gt;</text></g><!--MD5=[88f66da615ead437be96f70edff3214c]
class UserToken--><g id="elem_UserToken"><rect codeLine="115" fill="#F1F1F1" height="100.8281" id="UserToken" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="486" y="443.5"/><ellipse cx="506.4" cy="459.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M509.1656,455.375 Q509.3219,455.1563 509.5094,455.0469 Q509.6969,454.9375 509.9156,454.9375 Q510.2906,454.9375 510.525,455.1953 Q510.7594,455.4531 510.7594,456.0625 L510.7594,457.5156 Q510.7594,458.125 510.525,458.3906 Q510.2906,458.6563 509.9156,458.6563 Q509.5719,458.6563 509.3688,458.4531 Q509.1656,458.2656 509.0563,457.75 Q509.0094,457.3906 508.8219,457.2031 Q508.4938,456.8281 507.8844,456.6094 Q507.275,456.3906 506.65,456.3906 Q505.8844,456.3906 505.2516,456.7188 Q504.6188,457.0469 504.1266,457.7969 Q503.6344,458.5469 503.6344,459.5781 L503.6344,460.6719 Q503.6344,461.9063 504.525,462.7266 Q505.4156,463.5469 507.0094,463.5469 Q507.9469,463.5469 508.6031,463.2969 Q508.9938,463.1406 509.4156,462.7031 Q509.6813,462.4375 509.8297,462.3594 Q509.9781,462.2813 510.1813,462.2813 Q510.5094,462.2813 510.7672,462.5391 Q511.025,462.7969 511.025,463.1406 Q511.025,463.4844 510.6813,463.8906 Q510.1813,464.4688 509.3844,464.7969 Q508.3063,465.25 507.0094,465.25 Q505.4938,465.25 504.2906,464.625 Q503.3063,464.125 502.6188,463.0547 Q501.9313,461.9844 501.9313,460.7031 L501.9313,459.5469 Q501.9313,458.2188 502.5484,457.0703 Q503.1656,455.9219 504.2594,455.3047 Q505.3531,454.6875 506.5875,454.6875 Q507.3219,454.6875 507.9703,454.8516 Q508.6188,455.0156 509.1656,455.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="521.6" y="465.2285">UserToken</text><line style="stroke:#181818;stroke-width:0.5;" x1="487" x2="598" y1="475.5" y2="475.5"/><ellipse cx="497" cy="489.8047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="506" y="494.0332">UserID : int</text><ellipse cx="497" cy="507.4141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="506" y="511.6426">Email : string</text><ellipse cx="497" cy="525.0234" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="506" y="529.252">Token : string</text><line style="stroke:#181818;stroke-width:0.5;" x1="487" x2="598" y1="536.3281" y2="536.3281"/></g><!--MD5=[3a13148eff96962085f13babcc0d4f9f]
class IUserLocationProvider--><g id="elem_IUserLocationProvider"><rect codeLine="83" fill="#F1F1F1" height="100.8281" id="IUserLocationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="540" x="2305.5" y="256"/><ellipse cx="2501.25" cy="272" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2502.2031,268.6406 L2502.2031,275.2969 L2503.9219,275.2969 Q2504.5313,275.2969 2504.7969,275.5313 Q2505.0625,275.7656 2505.0625,276.1563 Q2505.0625,276.5313 2504.7969,276.7656 Q2504.5313,277 2503.9219,277 L2498.7813,277 Q2498.1719,277 2497.9063,276.7656 Q2497.6406,276.5313 2497.6406,276.1406 Q2497.6406,275.7656 2497.9063,275.5313 Q2498.1719,275.2969 2498.7813,275.2969 L2500.5,275.2969 L2500.5,268.6406 L2498.7813,268.6406 Q2498.1719,268.6406 2497.9063,268.4063 Q2497.6406,268.1719 2497.6406,267.7813 Q2497.6406,267.4063 2497.9063,267.1719 Q2498.1719,266.9375 2498.7813,266.9375 L2503.9219,266.9375 Q2504.5313,266.9375 2504.7969,267.1719 Q2505.0625,267.4063 2505.0625,267.7813 Q2505.0625,268.1719 2504.7969,268.4063 Q2504.5313,268.6406 2503.9219,268.6406 L2502.2031,268.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="140" x="2521.75" y="277.7285">IUserLocationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="2306.5" x2="2844.5" y1="288" y2="288"/><line style="stroke:#181818;stroke-width:0.5;" x1="2306.5" x2="2844.5" y1="296" y2="296"/><ellipse cx="2316.5" cy="310.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="260" x="2325.5" y="314.5332">IsIPLockedAsync(ip : string) : Task&lt;bool&gt;</text><ellipse cx="2316.5" cy="327.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="441" x="2325.5" y="332.1426">LogLocationAsync(userLocation: UserLocation) : Task&lt;UserLocation&gt;</text><ellipse cx="2316.5" cy="345.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="514" x="2325.5" y="349.752">UserWasLoggedInFromLocationAsync(userLocation : UserLocation) : Task&lt;bool&gt;</text></g><!--MD5=[a2d8207c5488f269b0816fb28beca551]
class DbUser--><g id="elem_DbUser"><rect codeLine="129" fill="#F1F1F1" height="83.2188" id="DbUser" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="1356.5" y="452.5"/><ellipse cx="1419.75" cy="468.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1422.5156,464.375 Q1422.6719,464.1563 1422.8594,464.0469 Q1423.0469,463.9375 1423.2656,463.9375 Q1423.6406,463.9375 1423.875,464.1953 Q1424.1094,464.4531 1424.1094,465.0625 L1424.1094,466.5156 Q1424.1094,467.125 1423.875,467.3906 Q1423.6406,467.6563 1423.2656,467.6563 Q1422.9219,467.6563 1422.7188,467.4531 Q1422.5156,467.2656 1422.4063,466.75 Q1422.3594,466.3906 1422.1719,466.2031 Q1421.8438,465.8281 1421.2344,465.6094 Q1420.625,465.3906 1420,465.3906 Q1419.2344,465.3906 1418.6016,465.7188 Q1417.9688,466.0469 1417.4766,466.7969 Q1416.9844,467.5469 1416.9844,468.5781 L1416.9844,469.6719 Q1416.9844,470.9063 1417.875,471.7266 Q1418.7656,472.5469 1420.3594,472.5469 Q1421.2969,472.5469 1421.9531,472.2969 Q1422.3438,472.1406 1422.7656,471.7031 Q1423.0313,471.4375 1423.1797,471.3594 Q1423.3281,471.2813 1423.5313,471.2813 Q1423.8594,471.2813 1424.1172,471.5391 Q1424.375,471.7969 1424.375,472.1406 Q1424.375,472.4844 1424.0313,472.8906 Q1423.5313,473.4688 1422.7344,473.7969 Q1421.6563,474.25 1420.3594,474.25 Q1418.8438,474.25 1417.6406,473.625 Q1416.6563,473.125 1415.9688,472.0547 Q1415.2813,470.9844 1415.2813,469.7031 L1415.2813,468.5469 Q1415.2813,467.2188 1415.8984,466.0703 Q1416.5156,464.9219 1417.6094,464.3047 Q1418.7031,463.6875 1419.9375,463.6875 Q1420.6719,463.6875 1421.3203,463.8516 Q1421.9688,464.0156 1422.5156,464.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="1440.25" y="474.2285">DbUser</text><line style="stroke:#181818;stroke-width:0.5;" x1="1357.5" x2="1537.5" y1="484.5" y2="484.5"/><ellipse cx="1367.5" cy="498.8047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="1376.5" y="503.0332">HashedPassword : string</text><ellipse cx="1367.5" cy="516.4141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1376.5" y="520.6426">Salt : string</text><line style="stroke:#181818;stroke-width:0.5;" x1="1357.5" x2="1537.5" y1="527.7188" y2="527.7188"/></g><!--MD5=[1a3d1e414f70b9a6597f64281cc6a626]
class UserLocation--><g id="elem_UserLocation"><rect codeLine="151" fill="#F1F1F1" height="153.6563" id="UserLocation" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="2493" y="417"/><ellipse cx="2530.5" cy="433" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2533.2656,428.875 Q2533.4219,428.6563 2533.6094,428.5469 Q2533.7969,428.4375 2534.0156,428.4375 Q2534.3906,428.4375 2534.625,428.6953 Q2534.8594,428.9531 2534.8594,429.5625 L2534.8594,431.0156 Q2534.8594,431.625 2534.625,431.8906 Q2534.3906,432.1563 2534.0156,432.1563 Q2533.6719,432.1563 2533.4688,431.9531 Q2533.2656,431.7656 2533.1563,431.25 Q2533.1094,430.8906 2532.9219,430.7031 Q2532.5938,430.3281 2531.9844,430.1094 Q2531.375,429.8906 2530.75,429.8906 Q2529.9844,429.8906 2529.3516,430.2188 Q2528.7188,430.5469 2528.2266,431.2969 Q2527.7344,432.0469 2527.7344,433.0781 L2527.7344,434.1719 Q2527.7344,435.4063 2528.625,436.2266 Q2529.5156,437.0469 2531.1094,437.0469 Q2532.0469,437.0469 2532.7031,436.7969 Q2533.0938,436.6406 2533.5156,436.2031 Q2533.7813,435.9375 2533.9297,435.8594 Q2534.0781,435.7813 2534.2813,435.7813 Q2534.6094,435.7813 2534.8672,436.0391 Q2535.125,436.2969 2535.125,436.6406 Q2535.125,436.9844 2534.7813,437.3906 Q2534.2813,437.9688 2533.4844,438.2969 Q2532.4063,438.75 2531.1094,438.75 Q2529.5938,438.75 2528.3906,438.125 Q2527.4063,437.625 2526.7188,436.5547 Q2526.0313,435.4844 2526.0313,434.2031 L2526.0313,433.0469 Q2526.0313,431.7188 2526.6484,430.5703 Q2527.2656,429.4219 2528.3594,428.8047 Q2529.4531,428.1875 2530.6875,428.1875 Q2531.4219,428.1875 2532.0703,428.3516 Q2532.7188,428.5156 2533.2656,428.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="2549.5" y="438.7285">UserLocation</text><line style="stroke:#181818;stroke-width:0.5;" x1="2494" x2="2657" y1="449" y2="449"/><ellipse cx="2504" cy="463.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="2513" y="467.5332">ID : int</text><ellipse cx="2504" cy="480.9141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="2513" y="485.1426">UserID : int</text><ellipse cx="2504" cy="498.5234" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="2513" y="502.752">IP : string</text><ellipse cx="2504" cy="516.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="2513" y="520.3613">UserAgent : string</text><ellipse cx="2504" cy="533.7422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="2513" y="537.9707">Successful : bool</text><ellipse cx="2504" cy="551.3516" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="2513" y="555.5801">CreateDate : datetime</text><line style="stroke:#181818;stroke-width:0.5;" x1="2494" x2="2657" y1="562.6563" y2="562.6563"/></g><!--MD5=[c40368751ea5476301fbcdc8cb25eba8]
class Security--><g id="elem_Security"><rect codeLine="96" fill="#F1F1F1" height="100.8281" id="Security" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="480" x="2655.5" y="51"/><ellipse cx="2865.75" cy="67" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2868.5156,62.875 Q2868.6719,62.6563 2868.8594,62.5469 Q2869.0469,62.4375 2869.2656,62.4375 Q2869.6406,62.4375 2869.875,62.6953 Q2870.1094,62.9531 2870.1094,63.5625 L2870.1094,65.0156 Q2870.1094,65.625 2869.875,65.8906 Q2869.6406,66.1563 2869.2656,66.1563 Q2868.9219,66.1563 2868.7188,65.9531 Q2868.5156,65.7656 2868.4063,65.25 Q2868.3594,64.8906 2868.1719,64.7031 Q2867.8438,64.3281 2867.2344,64.1094 Q2866.625,63.8906 2866,63.8906 Q2865.2344,63.8906 2864.6016,64.2188 Q2863.9688,64.5469 2863.4766,65.2969 Q2862.9844,66.0469 2862.9844,67.0781 L2862.9844,68.1719 Q2862.9844,69.4063 2863.875,70.2266 Q2864.7656,71.0469 2866.3594,71.0469 Q2867.2969,71.0469 2867.9531,70.7969 Q2868.3438,70.6406 2868.7656,70.2031 Q2869.0313,69.9375 2869.1797,69.8594 Q2869.3281,69.7813 2869.5313,69.7813 Q2869.8594,69.7813 2870.1172,70.0391 Q2870.375,70.2969 2870.375,70.6406 Q2870.375,70.9844 2870.0313,71.3906 Q2869.5313,71.9688 2868.7344,72.2969 Q2867.6563,72.75 2866.3594,72.75 Q2864.8438,72.75 2863.6406,72.125 Q2862.6563,71.625 2861.9688,70.5547 Q2861.2813,69.4844 2861.2813,68.2031 L2861.2813,67.0469 Q2861.2813,65.7188 2861.8984,64.5703 Q2862.5156,63.4219 2863.6094,62.8047 Q2864.7031,62.1875 2865.9375,62.1875 Q2866.6719,62.1875 2867.3203,62.3516 Q2867.9688,62.5156 2868.5156,62.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="2886.25" y="72.7285">Security</text><line style="stroke:#181818;stroke-width:0.5;" x1="2656.5" x2="3134.5" y1="83" y2="83"/><line style="stroke:#181818;stroke-width:0.5;" x1="2656.5" x2="3134.5" y1="91" y2="91"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2663.5" y="102.3047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="312" x="2675.5" y="109.5332">GetEncryptedPassword(password : string) : string</text><ellipse cx="2666.5" cy="122.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="197" x="2675.5" y="127.1426">GetSalt(saltLength : int) : string</text><ellipse cx="2666.5" cy="140.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="454" x="2675.5" y="144.752">GetEncryptedAndSaltedPassword(password : string, salt : string) : string</text></g><!--MD5=[530bdd8d88d30015127c6b1b07c38463]
class RegexHelper--><g id="elem_RegexHelper"><rect codeLine="102" fill="#F1F1F1" height="65.6094" id="RegexHelper" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="388" x="3170.5" y="68.5"/><ellipse cx="3319.75" cy="84.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M3322.5156,80.375 Q3322.6719,80.1563 3322.8594,80.0469 Q3323.0469,79.9375 3323.2656,79.9375 Q3323.6406,79.9375 3323.875,80.1953 Q3324.1094,80.4531 3324.1094,81.0625 L3324.1094,82.5156 Q3324.1094,83.125 3323.875,83.3906 Q3323.6406,83.6563 3323.2656,83.6563 Q3322.9219,83.6563 3322.7188,83.4531 Q3322.5156,83.2656 3322.4063,82.75 Q3322.3594,82.3906 3322.1719,82.2031 Q3321.8438,81.8281 3321.2344,81.6094 Q3320.625,81.3906 3320,81.3906 Q3319.2344,81.3906 3318.6016,81.7188 Q3317.9688,82.0469 3317.4766,82.7969 Q3316.9844,83.5469 3316.9844,84.5781 L3316.9844,85.6719 Q3316.9844,86.9063 3317.875,87.7266 Q3318.7656,88.5469 3320.3594,88.5469 Q3321.2969,88.5469 3321.9531,88.2969 Q3322.3438,88.1406 3322.7656,87.7031 Q3323.0313,87.4375 3323.1797,87.3594 Q3323.3281,87.2813 3323.5313,87.2813 Q3323.8594,87.2813 3324.1172,87.5391 Q3324.375,87.7969 3324.375,88.1406 Q3324.375,88.4844 3324.0313,88.8906 Q3323.5313,89.4688 3322.7344,89.7969 Q3321.6563,90.25 3320.3594,90.25 Q3318.8438,90.25 3317.6406,89.625 Q3316.6563,89.125 3315.9688,88.0547 Q3315.2813,86.9844 3315.2813,85.7031 L3315.2813,84.5469 Q3315.2813,83.2188 3315.8984,82.0703 Q3316.5156,80.9219 3317.6094,80.3047 Q3318.7031,79.6875 3319.9375,79.6875 Q3320.6719,79.6875 3321.3203,79.8516 Q3321.9688,80.0156 3322.5156,80.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="3340.25" y="90.2285">RegexHelper</text><line style="stroke:#181818;stroke-width:0.5;" x1="3171.5" x2="3557.5" y1="100.5" y2="100.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="3171.5" x2="3557.5" y1="108.5" y2="108.5"/><ellipse cx="3181.5" cy="122.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="362" x="3190.5" y="127.0332">TryToGetBrowserWithoutVersion(browser : string) : string</text></g><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><g id="elem_User"><rect codeLine="121" fill="#F1F1F1" height="136.0469" id="User" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="1356.5" y="631"/><ellipse cx="1421.75" cy="647" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1424.5156,642.875 Q1424.6719,642.6563 1424.8594,642.5469 Q1425.0469,642.4375 1425.2656,642.4375 Q1425.6406,642.4375 1425.875,642.6953 Q1426.1094,642.9531 1426.1094,643.5625 L1426.1094,645.0156 Q1426.1094,645.625 1425.875,645.8906 Q1425.6406,646.1563 1425.2656,646.1563 Q1424.9219,646.1563 1424.7188,645.9531 Q1424.5156,645.7656 1424.4063,645.25 Q1424.3594,644.8906 1424.1719,644.7031 Q1423.8438,644.3281 1423.2344,644.1094 Q1422.625,643.8906 1422,643.8906 Q1421.2344,643.8906 1420.6016,644.2188 Q1419.9688,644.5469 1419.4766,645.2969 Q1418.9844,646.0469 1418.9844,647.0781 L1418.9844,648.1719 Q1418.9844,649.4063 1419.875,650.2266 Q1420.7656,651.0469 1422.3594,651.0469 Q1423.2969,651.0469 1423.9531,650.7969 Q1424.3438,650.6406 1424.7656,650.2031 Q1425.0313,649.9375 1425.1797,649.8594 Q1425.3281,649.7813 1425.5313,649.7813 Q1425.8594,649.7813 1426.1172,650.0391 Q1426.375,650.2969 1426.375,650.6406 Q1426.375,650.9844 1426.0313,651.3906 Q1425.5313,651.9688 1424.7344,652.2969 Q1423.6563,652.75 1422.3594,652.75 Q1420.8438,652.75 1419.6406,652.125 Q1418.6563,651.625 1417.9688,650.5547 Q1417.2813,649.4844 1417.2813,648.2031 L1417.2813,647.0469 Q1417.2813,645.7188 1417.8984,644.5703 Q1418.5156,643.4219 1419.6094,642.8047 Q1420.7031,642.1875 1421.9375,642.1875 Q1422.6719,642.1875 1423.3203,642.3516 Q1423.9688,642.5156 1424.5156,642.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="1442.25" y="652.7285">User</text><line style="stroke:#181818;stroke-width:0.5;" x1="1357.5" x2="1523.5" y1="663" y2="663"/><ellipse cx="1367.5" cy="677.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="1376.5" y="681.5332">ID : int</text><ellipse cx="1367.5" cy="694.9141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="1376.5" y="699.1426">IsVerified : bool</text><ellipse cx="1367.5" cy="712.5234" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1376.5" y="716.752">IsLocked : bool</text><ellipse cx="1367.5" cy="730.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1376.5" y="734.3613">FailedTries : int</text><ellipse cx="1367.5" cy="747.7422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="142" x="1376.5" y="751.9707">LockedDate datetime?</text><line style="stroke:#181818;stroke-width:0.5;" x1="1357.5" x2="1523.5" y1="759.0469" y2="759.0469"/></g><!--MD5=[d72258e41e132b68712ed2a953e26009]
class UserBase--><g id="elem_UserBase"><rect codeLine="138" fill="#F1F1F1" height="118.4375" id="UserBase" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="1252" y="827"/><ellipse cx="1298.75" cy="843" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1301.5156,838.875 Q1301.6719,838.6563 1301.8594,838.5469 Q1302.0469,838.4375 1302.2656,838.4375 Q1302.6406,838.4375 1302.875,838.6953 Q1303.1094,838.9531 1303.1094,839.5625 L1303.1094,841.0156 Q1303.1094,841.625 1302.875,841.8906 Q1302.6406,842.1563 1302.2656,842.1563 Q1301.9219,842.1563 1301.7188,841.9531 Q1301.5156,841.7656 1301.4063,841.25 Q1301.3594,840.8906 1301.1719,840.7031 Q1300.8438,840.3281 1300.2344,840.1094 Q1299.625,839.8906 1299,839.8906 Q1298.2344,839.8906 1297.6016,840.2188 Q1296.9688,840.5469 1296.4766,841.2969 Q1295.9844,842.0469 1295.9844,843.0781 L1295.9844,844.1719 Q1295.9844,845.4063 1296.875,846.2266 Q1297.7656,847.0469 1299.3594,847.0469 Q1300.2969,847.0469 1300.9531,846.7969 Q1301.3438,846.6406 1301.7656,846.2031 Q1302.0313,845.9375 1302.1797,845.8594 Q1302.3281,845.7813 1302.5313,845.7813 Q1302.8594,845.7813 1303.1172,846.0391 Q1303.375,846.2969 1303.375,846.6406 Q1303.375,846.9844 1303.0313,847.3906 Q1302.5313,847.9688 1301.7344,848.2969 Q1300.6563,848.75 1299.3594,848.75 Q1297.8438,848.75 1296.6406,848.125 Q1295.6563,847.625 1294.9688,846.5547 Q1294.2813,845.4844 1294.2813,844.2031 L1294.2813,843.0469 Q1294.2813,841.7188 1294.8984,840.5703 Q1295.5156,839.4219 1296.6094,838.8047 Q1297.7031,838.1875 1298.9375,838.1875 Q1299.6719,838.1875 1300.3203,838.3516 Q1300.9688,838.5156 1301.5156,838.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1319.25" y="848.7285">UserBase</text><line style="stroke:#181818;stroke-width:0.5;" x1="1253" x2="1414" y1="859" y2="859"/><ellipse cx="1263" cy="873.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1272" y="877.5332">Email : string</text><ellipse cx="1263" cy="890.9141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1272" y="895.1426">FirstName : string</text><ellipse cx="1263" cy="908.5234" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="1272" y="912.752">LastName : string</text><ellipse cx="1263" cy="926.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="1272" y="930.3613">PhoneNumber : string</text><line style="stroke:#181818;stroke-width:0.5;" x1="1253" x2="1414" y1="937.4375" y2="937.4375"/></g><!--MD5=[1dfc107116a4b0bc1198698a4e609bfa]
reverse link UserController to IUserManager--><g id="link_UserController_IUserManager"><path codeLine="20" d="M1015.83,207.38 C1027.5,224.29 1039.07,241.08 1049.26,255.85 " fill="none" id="UserController-backto-IUserManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1008.17,196.28,1008.2865,203.4902,1014.9868,206.1558,1014.8703,198.9456,1008.17,196.28" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[548e9c59867ce01a8de3c5e8efb076c9]
reverse link UserController to ITokenManager--><g id="link_UserController_ITokenManager"><path codeLine="21" d="M746.59,202.18 C709.71,220.85 672.67,239.61 640.46,255.91 " fill="none" id="UserController-backto-ITokenManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="758.55,196.13,751.3903,195.2707,747.8434,201.5492,755.0031,202.4085,758.55,196.13" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d4b0c0978a527e7d73578f3b8ff1d639]
link IUserManager to UserCreate--><g id="link_IUserManager_UserCreate"><path codeLine="63" d="M1129.03,357.22 C1143.39,375.02 1158.18,395.93 1168.5,417 C1208.52,498.71 1227.92,605.05 1235.86,660.55 " fill="none" id="IUserManager-to-UserCreate" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1236.6,665.76,1239.2985,656.288,1235.8989,660.8094,1231.3775,657.4098,1236.6,665.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b144519fb167e24c357139cc31a61e5d]
link IUserManager to UserLogin--><g id="link_IUserManager_UserLogin"><path codeLine="64" d="M1083.5,357.21 C1083.5,385.2 1083.5,419.9 1083.5,447.22 " fill="none" id="IUserManager-to-UserLogin" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1083.5,452.23,1087.5,443.23,1083.5,447.23,1079.5,443.23,1083.5,452.23" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5d0d21d87f609d36e9bd211d6cdf12f6]
link UserManager to IUserManager--><g id="link_UserManager_IUserManager"><path codeLine="65" d="M1507.62,152.03 C1426.59,181.35 1323.66,218.6 1239.49,249.05 " fill="none" id="UserManager-to-IUserManager" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1241.65,255.72,1220.46,255.94,1236.89,242.55,1241.65,255.72" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[1231944e95ebfb91f3104517f7260a55]
reverse link UserManager to IUserProvider--><g id="link_UserManager_IUserProvider"><path codeLine="66" d="M1602.66,163.17 C1582.3,192.69 1558.14,227.72 1538.88,255.65 " fill="none" id="UserManager-backto-IUserProvider" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1610.25,152.16,1603.5521,154.8317,1603.4421,162.042,1610.1401,159.3703,1610.25,152.16" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[536fba823f8263b20c30d29df0fd99b8]
reverse link UserManager to IUserLocationManager--><g id="link_UserManager_IUserLocationManager"><path codeLine="67" d="M1743.14,158.74 C1796.52,189.19 1861.89,226.46 1913.39,255.83 " fill="none" id="UserManager-backto-IUserLocationManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1731.59,152.16,1734.8237,158.6054,1742.017,158.0994,1738.7833,151.654,1731.59,152.16" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f4b9cc5a9edb981f7418b8fcf7de3067]
link TokenManager to ITokenManager--><g id="link_TokenManager_ITokenManager"><path codeLine="69" d="M327.29,143.09 C365.36,171.82 417.11,210.88 460.33,243.49 " fill="none" id="TokenManager-to-ITokenManager" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="464.68,238,476.43,255.64,456.25,249.18,464.68,238" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8f9038f41d1a9fcfa0da510f3a7dcbcc]
reverse link ITokenManager to UserToken--><g id="link_ITokenManager_UserToken"><path codeLine="70" d="M542.5,370.47 C542.5,394.3 542.5,421.06 542.5,443.47 " fill="none" id="ITokenManager-backto-UserToken" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="542.5,357.21,538.5,363.21,542.5,369.21,546.5,363.21,542.5,357.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a7358745a089081073f5a601608e5a73]
link UserLocationManager to IUserLocationManager--><g id="link_UserLocationManager_IUserLocationManager"><path codeLine="73" d="M2313.32,143.09 C2256.3,172.69 2178.15,213.27 2114.23,246.45 " fill="none" id="UserLocationManager-to-IUserLocationManager" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2117.16,252.82,2096.18,255.82,2110.71,240.39,2117.16,252.82" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[0a4ead1edd2c2b1fdc9bf52f1c627135]
reverse link UserLocationManager to IUserLocationProvider--><g id="link_UserLocationManager_IUserLocationProvider"><path codeLine="74" d="M2437.22,152.94 C2465.62,184.28 2501.99,224.4 2530.3,255.64 " fill="none" id="UserLocationManager-backto-IUserLocationProvider" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="2428.29,143.09,2429.3563,150.2218,2436.3496,151.9806,2435.2833,144.8488,2428.29,143.09" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ebed19925dbee498eddafde4c2e5889a]
reverse link IUserProvider to DbUser--><g id="link_IUserProvider_DbUser"><path codeLine="91" d="M1485.36,369.79 C1477.01,396.96 1467.45,428.07 1460.03,452.23 " fill="none" id="IUserProvider-backto-DbUser" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1489.23,357.21,1483.6457,361.7724,1485.7093,368.6819,1491.2936,364.1195,1489.23,357.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ebfa5078469ba21b5ab21ca793b470a4]
reverse link IUserLocationProvider to UserLocation--><g id="link_IUserLocationProvider_UserLocation"><path codeLine="92" d="M2575.5,370.54 C2575.5,385.46 2575.5,401.53 2575.5,416.95 " fill="none" id="IUserLocationProvider-backto-UserLocation" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2575.5,357.21,2571.5,363.21,2575.5,369.21,2579.5,363.21,2575.5,357.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2e2cd1f126b2a0e0fb6dd8bdb0da396b]
link User to UserBase--><g id="link_User_UserBase"><path codeLine="108" d="M1401.72,767.05 C1393.77,780.79 1385.35,795.35 1377.25,809.37 " fill="none" id="User-to-UserBase" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1383.27,812.93,1367.2,826.74,1371.15,805.92,1383.27,812.93" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[96a28894da16093fd8a9c441876c8015]
link UserCreate to UserBase--><g id="link_UserCreate_UserBase"><path codeLine="109" d="M1256.7,732.22 C1267.31,753.34 1281.66,781.87 1295.07,808.56 " fill="none" id="UserCreate-to-UserBase" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1301.43,805.62,1304.16,826.63,1288.92,811.91,1301.43,805.62" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[64c091ef33e37a15c4a5aacf767b2a5f]
link DbUser to User--><g id="link_DbUser_User"><path codeLine="111" d="M1446.1,535.59 C1445.36,557.15 1444.41,584.53 1443.51,610.64 " fill="none" id="DbUser-to-User" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1450.51,610.96,1442.82,630.7,1436.51,610.47,1450.51,610.96" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[e2e8a9d5d9f16c33f9e9650ff1c3818e]
@startuml API class diagram


top to bottom direction

'Controllers'

class UserController{
    -_logger{readonly} : ILogger<UserController>
    -_userManager{readonly} : IUserManager
    -_tokenManager : ITokenManager
    +UserController(logger : ILogger<UserController>, userManager : IUserManager, tokenManager : ITokenManager)
    
    +Create(userCreate : UserCreate) : Task<ActionResult<UserToken>>
    +Login(userLogin : UserLogin) : Task<ActionResult<UserToken>>
    +GetUserFromToken() : Task<ActionResult<User>>
}

'Controllers mappings' 

UserController o- - IUserManager
UserController o- - ITokenManager

'Managers'

interface IUserManager{
    +CreateUserAsync(userCreate : UserCreate) : Task<User>
    +LoginAsync(userLogin : UserLogin) : Task<User>
    +GetUserByIDAsync(id : int) : Task<User>
}

interface ITokenManager{
    +GenerateUserToken(user : User) : UserToken
    +ValidateToken(token : string) : bool
    +GetUserTokenFromToken(token : string) : UserToken
}


interface IUserLocationManager{
    +IsIPLockedAsync(ip : string) : Task<bool>
    +LogLocationAsync(userLocation : UserLocation) : Task<UserLocation>
    +UserWasLoggedInFromLocationAsync(userLocation : UserLocation) : Task<bool>
}

class TokenManager{
    -GetPrincipal(token : string) : ClaimsPrincipal
    -ClaimsIdentityToUserToken(identity : ClaimsPrincipal, token : string) : UserToken
}

class UserManager{
    -_userProvider : IUserProvider
    -_userLocationManager : IUserLocationManager
    +UserManager(userProvider : IUserProvider, userLocationManager : UserLocationManager)
}

class UserLocationManager{
    -_userLocationProvider : IUserLocationProvider
    +UserLocationManager(userLocationProvider : UserLocationProvider)
}


'Managers mappings'

IUserManager - -> UserCreate
IUserManager - -> UserLogin
UserManager .-|> IUserManager
UserManager o- - IUserProvider
UserManager o- - IUserLocationManager

TokenManager .-|> ITokenManager
ITokenManager *- - UserToken


UserLocationManager .-|> IUserLocationManager
UserLocationManager o- - IUserLocationProvider
'Providers'

interface IUserProvider{
    +CreateUserAsync(userCreate : DbUser) : Task<DbUser>
    +GetUserByEmailAsync(email : string) : Task<DbUser>
    +GetUserByIdAsync(id : int) : Task<DbUser>
}

interface IUserLocationProvider{
    +IsIPLockedAsync(ip : string) : Task<bool>
    +LogLocationAsync(userLocation: UserLocation) : Task<UserLocation>
    +UserWasLoggedInFromLocationAsync(userLocation : UserLocation) : Task<bool>
}

'Providers mappings'

IUserProvider *- - DbUser
IUserLocationProvider *- - UserLocation  

'Utility'

class Security{
    {static}-GetEncryptedPassword(password : string) : string
    {static}+GetSalt(saltLength : int) : string
    {static}+GetEncryptedAndSaltedPassword(password : string, salt : string) : string
}

class RegexHelper{
    {static}+TryToGetBrowserWithoutVersion(browser : string) : string
}

'Users mappings'

User - -|> UserBase
UserCreate - -|> UserBase

DbUser - -|> User

'User models' 

class UserToken{
    +UserID : int
    +Email : string
    +Token : string
}

class User{
    +ID : int 
    +IsVerified : bool
    +IsLocked : bool
    +FailedTries : int
    +LockedDate datetime?
}

class DbUser{
    +HashedPassword : string
    +Salt : string
}

class UserCreate {
    +Password : string
}

class UserBase{
    +Email : string
    +FirstName : string
    +LastName : string
    +PhoneNumber : string
}


class UserLogin{
    +Email : string
    +Password : string 
}

class UserLocation{
    +ID : int
    +UserID : int
    +IP : string
    +UserAgent : string
    +Successful : bool
    +CreateDate : datetime
}


@enduml

@startuml API class diagram


top to bottom direction


class UserController{
    -_logger{readonly} : ILogger<UserController>
    -_userManager{readonly} : IUserManager
    -_tokenManager : ITokenManager
    +UserController(logger : ILogger<UserController>, userManager : IUserManager, tokenManager : ITokenManager)
    
    +Create(userCreate : UserCreate) : Task<ActionResult<UserToken>>
    +Login(userLogin : UserLogin) : Task<ActionResult<UserToken>>
    +GetUserFromToken() : Task<ActionResult<User>>
}


UserController o- - IUserManager
UserController o- - ITokenManager


interface IUserManager{
    +CreateUserAsync(userCreate : UserCreate) : Task<User>
    +LoginAsync(userLogin : UserLogin) : Task<User>
    +GetUserByIDAsync(id : int) : Task<User>
}

interface ITokenManager{
    +GenerateUserToken(user : User) : UserToken
    +ValidateToken(token : string) : bool
    +GetUserTokenFromToken(token : string) : UserToken
}


interface IUserLocationManager{
    +IsIPLockedAsync(ip : string) : Task<bool>
    +LogLocationAsync(userLocation : UserLocation) : Task<UserLocation>
    +UserWasLoggedInFromLocationAsync(userLocation : UserLocation) : Task<bool>
}

class TokenManager{
    -GetPrincipal(token : string) : ClaimsPrincipal
    -ClaimsIdentityToUserToken(identity : ClaimsPrincipal, token : string) : UserToken
}

class UserManager{
    -_userProvider : IUserProvider
    -_userLocationManager : IUserLocationManager
    +UserManager(userProvider : IUserProvider, userLocationManager : UserLocationManager)
}

class UserLocationManager{
    -_userLocationProvider : IUserLocationProvider
    +UserLocationManager(userLocationProvider : UserLocationProvider)
}



IUserManager - -> UserCreate
IUserManager - -> UserLogin
UserManager .-|> IUserManager
UserManager o- - IUserProvider
UserManager o- - IUserLocationManager

TokenManager .-|> ITokenManager
ITokenManager *- - UserToken


UserLocationManager .-|> IUserLocationManager
UserLocationManager o- - IUserLocationProvider

interface IUserProvider{
    +CreateUserAsync(userCreate : DbUser) : Task<DbUser>
    +GetUserByEmailAsync(email : string) : Task<DbUser>
    +GetUserByIdAsync(id : int) : Task<DbUser>
}

interface IUserLocationProvider{
    +IsIPLockedAsync(ip : string) : Task<bool>
    +LogLocationAsync(userLocation: UserLocation) : Task<UserLocation>
    +UserWasLoggedInFromLocationAsync(userLocation : UserLocation) : Task<bool>
}


IUserProvider *- - DbUser
IUserLocationProvider *- - UserLocation  


class Security{
    {static}-GetEncryptedPassword(password : string) : string
    {static}+GetSalt(saltLength : int) : string
    {static}+GetEncryptedAndSaltedPassword(password : string, salt : string) : string
}

class RegexHelper{
    {static}+TryToGetBrowserWithoutVersion(browser : string) : string
}


User - -|> UserBase
UserCreate - -|> UserBase

DbUser - -|> User


class UserToken{
    +UserID : int
    +Email : string
    +Token : string
}

class User{
    +ID : int 
    +IsVerified : bool
    +IsLocked : bool
    +FailedTries : int
    +LockedDate datetime?
}

class DbUser{
    +HashedPassword : string
    +Salt : string
}

class UserCreate {
    +Password : string
}

class UserBase{
    +Email : string
    +FirstName : string
    +LastName : string
    +PhoneNumber : string
}


class UserLogin{
    +Email : string
    +Password : string 
}

class UserLocation{
    +ID : int
    +UserID : int
    +IP : string
    +UserAgent : string
    +Successful : bool
    +CreateDate : datetime
}


@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>