<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="808px" preserveAspectRatio="none" style="width:544px;height:808px;background:#FFFFFF;" version="1.1" viewBox="0 0 544 808" width="544px" zoomAndPan="magnify"><defs/><g><ellipse cx="169.1094" cy="16" fill="#222222" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="156" x="91.1094" y="67"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="136" x="101.1094" y="89.457">Recieve create user data</text><g id="elem_#5"><polygon fill="#90EE90" points="169.1094,143,181.1094,155,169.1094,167,157.1094,155,169.1094,143" style="stroke:#181818;stroke-width:0.5;"/></g><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="171" x="70.6094" y="208"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151" x="80.6094" y="230.457">throw badrequest exception</text><g id="elem_#10"><polygon fill="#90EE90" points="274.1094,213.5,286.1094,225.5,274.1094,237.5,262.1094,225.5,274.1094,213.5" style="stroke:#181818;stroke-width:0.5;"/></g><g id="elem_#13"><polygon fill="#90EE90" points="218.1094,303.5,230.1094,315.5,218.1094,327.5,206.1094,315.5,218.1094,303.5" style="stroke:#181818;stroke-width:0.5;"/></g><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169" x="115.6094" y="388"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="125.6094" y="410.457">Throw Email already in use</text><g id="elem_#18"><polygon fill="#90EE90" points="317.1094,393.5,329.1094,405.5,317.1094,417.5,305.1094,405.5,317.1094,393.5" style="stroke:#181818;stroke-width:0.5;"/></g><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="207" x="157.6094" y="478"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="187" x="167.6094" y="500.457">Throw password leaked exception</text><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="385.1094" y="478"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="88" x="395.1094" y="500.457">Hash password</text><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="367.6094" y="554"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="377.6094" y="576.457">Save user in database</text><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="149" x="364.6094" y="630"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="129" x="374.6094" y="652.457">Generate token for user</text><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="394.1094" y="706"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="70" x="404.1094" y="728.457">Return token</text><ellipse cx="439.1094" cy="792" fill="none" rx="10" ry="10" style="stroke:#FF0000;stroke-width:1.0;"/><ellipse cx="439.6094" cy="792.5" fill="#FF0000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><rect fill="#ADD8E6" height="35.0938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="250.6094" y="298"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="260.6094" y="320.457">Throw forbidden</text><!--MD5=[3932cca766dd937774683e8fb629e95d]
link start to Recieve create user data--><g id="link_start_Recieve create user data"><path d="M169.1094,26.25 C169.1094,35.43 169.1094,49.84 169.1094,61.9 " fill="none" id="start-to-Recieve create user data" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="169.1094,66.91,173.1094,57.91,169.1094,61.91,165.1094,57.91,169.1094,66.91" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[9a4f310c66a1cf0d79eadeab6631b815]
link Recieve create user data to #5--><g id="link_Recieve create user data_#5"><path d="M169.1094,102.08 C169.1094,112.87 169.1094,126.88 169.1094,137.63 " fill="none" id="Recieve create user data-to-#5" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="169.1094,142.92,173.1094,133.92,169.1094,137.92,165.1094,133.92,169.1094,142.92" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="143" x="6" y="136.2309">password length &lt; 8 or &gt; 128</text></g><!--MD5=[471711ab4fea776db1ad1dd3a456fb5c]
link #5 to throw badrequest exception--><g id="link_#5_throw badrequest exception"><path d="M167.2994,165.52 C165.4794,175.11 162.6094,190.23 160.2394,202.76 " fill="none" id="#5-to-throw badrequest exception" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="159.2494,207.95,164.8508,199.8492,160.1777,203.0369,156.9899,198.3638,159.2494,207.95" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[46dcf2c2a445c5816f2e190415bdd366]
link #5 to #10--><g id="link_#5_#10"><path d="M175.9994,160.18 C190.2094,168.85 223.7194,189.52 251.1094,208 C255.2094,210.77 259.6394,213.91 263.5094,216.7 " fill="none" id="#5-to-#10" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="267.7394,219.78,262.817,211.2494,263.6969,216.8374,258.1089,217.7174,267.7394,219.78" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66" x="293.7596" y="207.2821">Ip not blocked</text></g><!--MD5=[9538665f2ab965abc6aeb4806bf673b9]
link #10 to #13--><g id="link_#10_#13"><path d="M269.7194,233.41 C260.1094,248.5 237.1694,284.54 225.3794,303.07 " fill="none" id="#10-to-#13" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="222.6394,307.38,230.8495,301.9399,225.3265,303.1635,224.103,297.6405,222.6394,307.38" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="56" x="146.1031" y="293.3722">Email exists</text></g><!--MD5=[dfa91fef9ff2ba4f053e03a7ddd7fa94]
link #13 to Throw Email already in use--><g id="link_#13_Throw Email already in use"><path d="M216.1794,325.92 C213.4094,339.45 208.2294,364.79 204.4994,383.04 " fill="none" id="#13-to-Throw Email already in use" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="203.4894,387.98,209.2082,379.9616,204.4892,383.081,201.3698,378.3619,203.4894,387.98" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="19" x="212.1094" y="365.4189">true</text></g><!--MD5=[5b14e0bfd6ed502d365557b4ed922e16]
link #13 to #18--><g id="link_#13_#18"><path d="M224.0094,321.74 C240.4094,336.32 286.6894,377.46 307.1594,395.66 " fill="none" id="#13-to-#18" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="311.1194,399.17,307.0501,390.2011,307.3823,395.8482,301.7352,396.1804,311.1194,399.17" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="201" x="336.5189" y="394.2532">User password exists in leaked database</text></g><!--MD5=[a821bff61f0cc5c2abf4b513e0efb0d4]
link #18 to Throw password leaked exception--><g id="link_#18_Throw password leaked exception"><path d="M312.7194,413.41 C304.5694,426.21 286.8094,454.12 274.4094,473.59 " fill="none" id="#18-to-Throw password leaked exception" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="271.6994,477.86,279.9095,472.4199,274.3865,473.6435,273.163,468.1205,271.6994,477.86" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="22" x="294.1094" y="455.4189">True</text></g><!--MD5=[beb7d5394fae13cd2b4c1f2144682f1e]
link #18 to Hash password--><g id="link_#18_Hash password"><path d="M323.6694,411.23 C339.9894,423 383.1794,454.16 411.8494,474.84 " fill="none" id="#18-to-Hash password" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="415.9694,477.81,410.9933,469.3107,411.9085,474.893,406.3261,475.8081,415.9694,477.81" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="386.1094" y="455.4189">false</text></g><!--MD5=[c24b940335b56314a67cdd462dce68ef]
link Hash password to Save user in database--><g id="link_Hash password_Save user in database"><path d="M439.1094,513.29 C439.1094,523.79 439.1094,537.43 439.1094,548.75 " fill="none" id="Hash password-to-Save user in database" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="439.1094,553.77,443.1094,544.77,439.1094,548.77,435.1094,544.77,439.1094,553.77" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[63fec40f8536669992f9006b48374785]
link Save user in database to Generate token for user--><g id="link_Save user in database_Generate token for user"><path d="M439.1094,589.29 C439.1094,599.79 439.1094,613.43 439.1094,624.75 " fill="none" id="Save user in database-to-Generate token for user" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="439.1094,629.77,443.1094,620.77,439.1094,624.77,435.1094,620.77,439.1094,629.77" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ecc4c7a20eec23a9134f846750d4e969]
link Generate token for user to Return token--><g id="link_Generate token for user_Return token"><path d="M439.1094,665.29 C439.1094,675.79 439.1094,689.43 439.1094,700.75 " fill="none" id="Generate token for user-to-Return token" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="439.1094,705.77,443.1094,696.77,439.1094,700.77,435.1094,696.77,439.1094,705.77" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[e178f1f4068ee0e7f5aeacc8dbfee9ac]
link Return token to end--><g id="link_Return token_end"><path d="M439.1094,741.28 C439.1094,752.29 439.1094,766.52 439.1094,776.94 " fill="none" id="Return token-to-end" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="439.1094,782,443.1094,773,439.1094,777,435.1094,773,439.1094,782" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[9e94a16ea34a30873739664ab7f78cf3]
link #10 to Throw forbidden--><g id="link_#10_Throw forbidden"><path d="M277.0794,234.94 C281.7394,248.15 290.8894,274.14 297.4694,292.82 " fill="none" id="#10-to-Throw forbidden" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="299.2594,297.88,300.0577,288.0636,297.6057,293.1614,292.5079,290.7094,299.2594,297.88" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="293.1094" y="275.4189">false</text></g><!--MD5=[59111e11bd07fffcaf78175a470fb364]
@startuml Create User Flowchart

skinparam activity {
    BackgroundColor lightblue
    
    StartColor green
    EndColor red
    
    diamondBackgroundColor lightgreen
}


(*) - -> "Recieve create user data"
if "password length < 8 or > 128" then
  - ->throw badrequest exception
else
if "Ip not blocked " then
	if "Email exists" then
		- ->[true] "Throw Email already in use"
	else
		if "User password exists in leaked database" then
			- ->[True]"Throw password leaked exception"
		else
			- ->[false] "Hash password"
			- -> "Save user in database"
			- -> "Generate token for user"
			- -> "Return token"
			- -> (*)
		end if
	end if
else
- ->[false] "Throw forbidden"

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>