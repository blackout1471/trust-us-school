<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="702px" preserveAspectRatio="none" style="width:869px;height:702px;background:#FFFFFF;" version="1.1" viewBox="0 0 869 702" width="869px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="481" x="10" y="221.0156"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="37" x2="37" y1="82.6094" y2="620.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="234" x2="234" y1="82.6094" y2="620.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="431" x2="431" y1="82.6094" y2="620.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="620.5" x2="620.5" y1="82.6094" y2="620.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="733.5" x2="733.5" y1="82.6094" y2="620.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="830.5" x2="830.5" y1="82.6094" y2="620.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="20" y="79.5332">User</text><ellipse cx="37.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M37.5,21.5 L37.5,48.5 M24.5,29.5 L50.5,29.5 M37.5,48.5 L24.5,63.5 M37.5,48.5 L50.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="20" y="634.1191">User</text><ellipse cx="37.5" cy="645.6953" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M37.5,653.6953 L37.5,680.6953 M24.5,661.6953 L50.5,661.6953 M37.5,680.6953 L24.5,695.6953 M37.5,680.6953 L50.5,695.6953 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="182" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="189" y="71.5332">UserController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="182" y="619.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="189" y="641.1191">UserController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="382" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="389" y="71.5332">UserManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="382" y="619.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="389" y="641.1191">UserManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="572.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="579.5" y="71.5332">UserProvider</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="96" x="572.5" y="619.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="579.5" y="641.1191">UserProvider</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="678.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="685.5" y="71.5332">TokenManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="678.5" y="619.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="685.5" y="641.1191">TokenManager</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="798.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="805.5" y="71.5332">Security</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65" x="798.5" y="619.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="805.5" y="641.1191">Security</text><polygon fill="#181818" points="222.5,110.9609,232.5,114.9609,222.5,118.9609,226.5,114.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="37.5" x2="228.5" y1="114.9609" y2="114.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="44.5" y="110.1045">Create user (email, password)</text><polygon fill="#181818" points="419.5,141.3125,429.5,145.3125,419.5,149.3125,423.5,145.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="425.5" y1="145.3125" y2="145.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="241.5" y="140.4561">Create user (email, password)</text><polygon fill="#181818" points="608.5,171.6641,618.5,175.6641,608.5,179.6641,612.5,175.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="431.5" x2="614.5" y1="175.6641" y2="175.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="438.5" y="170.8076">Get user by email(email)</text><polygon fill="#181818" points="442.5,202.0156,432.5,206.0156,442.5,210.0156,438.5,206.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="436.5" x2="619.5" y1="206.0156" y2="206.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="448.5" y="201.1592">Return User</text><path d="M10,221.0156 L71,221.0156 L71,229.3672 L61,239.3672 L10,239.3672 L10,221.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="481" x="10" y="221.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="235.5107">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="86" y="234.4346">[User found]</text><polygon fill="#181818" points="245.5,257.7188,235.5,261.7188,245.5,265.7188,241.5,261.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="239.5" x2="430.5" y1="261.7188" y2="261.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="251.5" y="256.8623">User already exists</text><polygon fill="#181818" points="48.5,288.0703,38.5,292.0703,48.5,296.0703,44.5,292.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="42.5" x2="233.5" y1="292.0703" y2="292.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="54.5" y="287.2139">User already exists</text><polygon fill="#181818" points="819,325.4219,829,329.4219,819,333.4219,823,329.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="431.5" x2="825" y1="329.4219" y2="329.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="438.5" y="324.5654">Get salt</text><polygon fill="#181818" points="442.5,355.7734,432.5,359.7734,442.5,363.7734,438.5,359.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="436.5" x2="830" y1="359.7734" y2="359.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="448.5" y="354.917">Return salt</text><polygon fill="#181818" points="819,386.125,829,390.125,819,394.125,823,390.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="431.5" x2="825" y1="390.125" y2="390.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="438.5" y="385.2686">Salt password (password, salt)</text><polygon fill="#181818" points="442.5,416.4766,432.5,420.4766,442.5,424.4766,438.5,420.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="436.5" x2="830" y1="420.4766" y2="420.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="448.5" y="415.6201">Return salted password</text><polygon fill="#181818" points="608.5,446.8281,618.5,450.8281,608.5,454.8281,612.5,450.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="431.5" x2="614.5" y1="450.8281" y2="450.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="438.5" y="445.9717">Save user in database (user)</text><polygon fill="#181818" points="442.5,477.1797,432.5,481.1797,442.5,485.1797,438.5,481.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="436.5" x2="619.5" y1="481.1797" y2="481.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="448.5" y="476.3232">Return saved user</text><polygon fill="#181818" points="245.5,507.5313,235.5,511.5313,245.5,515.5313,241.5,511.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="239.5" x2="430.5" y1="511.5313" y2="511.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="251.5" y="506.6748">Returns User</text><polygon fill="#181818" points="721.5,537.8828,731.5,541.8828,721.5,545.8828,725.5,541.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234.5" x2="727.5" y1="541.8828" y2="541.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="241.5" y="537.0264">Get token for user (User)</text><polygon fill="#181818" points="245.5,568.2344,235.5,572.2344,245.5,576.2344,241.5,572.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="239.5" x2="732.5" y1="572.2344" y2="572.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="251.5" y="567.3779">Returns Token</text><polygon fill="#181818" points="48.5,598.5859,38.5,602.5859,48.5,606.5859,44.5,602.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="42.5" x2="233.5" y1="602.5859" y2="602.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="54.5" y="597.7295">Return token</text><!--MD5=[7fb8a339608c6d43da49485c51d50395]
@startuml Create User SD


actor User
participant UserController
participant UserManager
participant UserProvider
participant TokenManager
participant Security

User->UserController: Create user (email, password)
UserController->UserManager: Create user (email, password)
UserManager->UserProvider: Get user by email(email)
UserProvider->UserManager: Return User

alt User found

UserManager->UserController: User already exists
UserController->User: User already exists

end


UserManager->Security: Get salt
Security->UserManager: Return salt

UserManager->Security: Salt password (password, salt)
Security->UserManager: Return salted password

UserManager->UserProvider: Save user in database (user)
UserProvider->UserManager: Return saved user


UserManager->UserController: Returns User
UserController->TokenManager: Get token for user (User)
TokenManager->UserController: Returns Token

UserController->User: Return token

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>